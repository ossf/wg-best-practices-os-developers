[tox]
requires = tox-uv
envlist = py39,py310,py311,py312,py313,py314

[testenv]
description = Run pytest tests for Python {envname}
groups = test
commands = 
    pytest tests/ -v --tb=short

[testenv:lint]
description = Run linting checks with ruff
groups = dev
allowlist_externals = ruff
commands =
    ruff check tests/
    ruff format --check tests/

[testenv:coverage]
description = Run tests with full coverage reporting
groups = test
commands =
    pytest tests/ -v --tb=short --cov=tests --cov-report=html --cov-report=term

[testenv:links]
description = Check internal markdown links only (requires lychee to be installed separately)
groups = dev
allowlist_externals = lychee
commands =
    lychee --offline **/*.md
# Note: Internal link validation is already covered by test_link_validation.py
# This tox environment provides additional comprehensive link checking.

[testenv:links-external]
description = Check ALL markdown links including external URLs (requires lychee, may be slow)
groups = dev
allowlist_externals = lychee
commands =
    lychee --verbose --no-progress **/*.md
# Note: This checks external URLs which can be slow and may fail due to:
# - Temporary network issues
# - Rate limiting
# - Sites being temporarily down
# Use this locally before major releases or when updating external references.
#
# Lychee installation:
# Windows: scoop install lychee | choco install lychee | cargo install lychee
# Linux/macOS: brew install lychee | cargo install lychee
# Or download from: https://github.com/lycheeverse/lychee/releases
